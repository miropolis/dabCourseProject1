---
import Layout from "../layout/Layout.astro";
import GradingButton from "../components/GradingButton.svelte";
import ProgrammingAssignment from "../components/ProgrammingAssignment.svelte";
import ProgrammingSubmissions from "../components/ProgrammingSubmissions.svelte";

//Sample code for request to retrieve pages to build
/*const data = {user: user};
const response = await fetch("http://programming-api:7777/submissions-correct", {
    method: "POST",
    headers: {
        "Content-Type": "application/json",
    },
    body: JSON.stringify(data),
});*/

export function getStaticPaths() {
  //TODO: dynamic for more assignments?
  return [
    {params: {assignment: 'assignment-1'}},
    {params: {assignment: 'assignment-2'}},
    {params: {assignment: 'assignment-3'}},
  ];
}

const { assignment } = Astro.params;
const assignmentNumber = parseInt(assignment.slice(-1))
---
<Layout>
  <ProgrammingAssignment assignmentID={assignmentNumber} client:load />
  <GradingButton assignmentID={assignmentNumber} client:only={"svelte"} />
  <ProgrammingSubmissions assignmentID={assignmentNumber} client:load />
</Layout>
  